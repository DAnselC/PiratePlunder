<!DOCTYPE html>
<html>
    <head>
        <title>{{lobby_id}}</title>

        <link href="https://fonts.googleapis.com/css?family=Luckiest+Guy|Sedgwick+Ave|Signika" rel="stylesheet"> 
        <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
        
        <script
            type="text/javascript"
            src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js">
        </script>
        <script
            src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous">
        </script>
        <script>
            var socket = io.connect('http://' + document.domain + ':' + location.port);
            socket.on('connect', function() {
                // socket.emit('my event', {data: 'I\'m connected!'});
            });

            // Handle game start event
            socket.on('game_start', function(serverData) {
                window.location.href = "/game/{{lobby_id}}";
            });
        </script>
    </head>

    <body>
        <div id="lobbyPage">
            <button class="backButton" onclick="window.location.href = '/';">â¬…</button>
            <label class="title">{{ lobby_id }}</label>
            <div class="ready">
                <span>READY?</span>
                <input id="readyCheck" type="checkbox">
                <label for="readyCheck"></label>
            </div>
        </div>

        <script>
            var readyBox = document.querySelector('#lobbyPage .ready input');

            readyBox.onclick = function () {
                var status = "unready";
                if (readyBox.checked) {
                    status = "ready";
                }

                $.ajax({url: window.location.href + '?status=' + status, method: 'POST'});
            }
        </script>
    </body>
</html>